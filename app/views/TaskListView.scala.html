@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import templates.Layout
@import models.requests.BusinessData

@this(layout: Layout,
      selfEmployments: SelfEmployments)

@(taxYear: Int, nino: String, selfEmploymentList: Seq[TaggedSelfEmploymentsViewModel])(implicit request: Request[_], messages: Messages)

@layout(pageTitle = titleNoForm(messages("taskList.title"))) {

    <h2 class="app-task-list__section">@messages("taskList.title")</h2>

    <ul class="app-task-list__items govuk-!-padding-left-0">
        <li class="app-task-list__item">
            <span class="app-task-list__task-name">
                <a href="#" style="govuk-link">
                    @messages("taskList.reviewLink")
                </a>
            </span>
            <a href="#">
                <strong class="govuk-tag app-task-list__tag govuk-tag--grey">@messages("status.checkOurRecords")</strong>
            </a>
        </li>
    </ul>


    @for((selfEmployment, index) <- selfEmploymentList.zipWithIndex){
        <h2 class="app-task-list__section">
            @{s"${selfEmployment.getOrElse(messages("error.noTradingName")).businessData.tradingName} - $messages("taskList.title")"}
        </h2>

        <ul class="app-task-list__items govuk-!-padding-left-0">
            <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                    <a href="@SelfEmploymentAbroadController.onPageLoad(taxYear, if (status.equals("notStarted")) NormalMode else CheckMode)" style="govuk-link">
                        @messages("selfEmploymentAbroad")
                    </a>
                </span>
                <a href="#">
                    <strong class=s"govuk-tag app-task-list__tag @{s"govuk-tag--${selfEmployment.status}"}>
                        @messages(s"status.${selfEmployment.status}")
                    </strong>
                </a>
            </li>
        </ul>
    }

}
